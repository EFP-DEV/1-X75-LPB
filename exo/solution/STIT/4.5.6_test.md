# Exercice 4.5 — Jeu de tests (pour comprendre pourquoi c’est difficile)

## Pourquoi on écrit un jeu de tests ?

Quand on écrit un algorithme avec plusieurs issues possibles, on peut avoir l’impression que “ça marche” après 2 ou 3 essais.

Mais un programme peut fonctionner sur quelques exemples **et être faux**.

Un jeu de tests sert à vérifier :

* toutes les **issues** possibles,
* toutes les **bornes** (`50`, `12,5`),
* toutes les **égalités** (à cause de `>=`),
* toutes les **causes différentes** d’un même résultat (ex : “battu”).

Le but de ce document est de vous montrer qu’un jeu de tests sérieux devient vite… **tortueux**.

---

## Règles à appliquer (Version 5)

On lit `s1, s2, s3, s4` (pourcentages du premier tour).

On ne décide que pour le candidat 1.

Issues :

* **élu**
* **battu**
* **ballottage favorable**
* **ballottage défavorable**

Règles :

1. Si `s1 > 50` → **élu**
2. Sinon, si `s1 < 12,5` **OU** si un autre candidat a `> 50` → **battu**
3. Sinon, si `s1` est en tête (égalité incluse) → **ballottage favorable**
4. Sinon → **ballottage défavorable**

---

## Consigne

Pour chaque test :

1. notez l’entrée (`s1 s2 s3 s4`)
2. écrivez le résultat attendu
3. **justifiez** en une ligne : quel test déclenche la réponse

---

# Jeu de tests

> Remarque : les nombres peuvent être décimaux (ex : `12,49` / `50,01`).

---

## A — Tester “élu” (borne 50)

### T01 — élu simple

* Entrée : `55 20 15 10`
* Attendu : **élu**
* Justification : `s1 > 50`

### T02 — exactement 50 (pas élu)

* Entrée : `50 20 15 15`
* Attendu : **ballottage favorable**
* Justification : `s1 > 50` faux, pas battu, et `s1` est en tête

### T03 — juste au-dessus de 50

* Entrée : `50,01 25 15 9,99`
* Attendu : **élu**
* Justification : `s1 > 50`

---

## B — Tester “battu” (cause 1 : `s1 < 12,5`)

### T04 — battu car éliminé

* Entrée : `8 40 30 22`
* Attendu : **battu**
* Justification : `s1 < 12,5`

### T05 — juste en-dessous de 12,5

* Entrée : `12,49 40 30 17,51`
* Attendu : **battu**
* Justification : `s1 < 12,5`

### T06 — exactement 12,5 (qualifié)

* Entrée : `12,5 40 30 17,5`
* Attendu : **ballottage défavorable**
* Justification : `s1 < 12,5` faux, personne > 50, mais `s1` n’est pas en tête

---

## C — Tester “battu” (cause 2 : un autre `> 50`)

### T07 — battu car candidat 2 élu

* Entrée : `30 55 10 5`
* Attendu : **battu**
* Justification : `s2 > 50`

### T08 — battu car candidat 3 élu

* Entrée : `30 10 50,01 9,99`
* Attendu : **battu**
* Justification : `s3 > 50`

### T09 — autre exactement 50 (ne déclenche pas “battu”)

* Entrée : `35 50 10 5`
* Attendu : **ballottage défavorable**
* Justification : `s2 > 50` faux, `s1` n’est pas en tête

---

## D — Tester “ballottage favorable” (en tête, égalité incluse)

### T10 — en tête seul

* Entrée : `35 30 20 15`
* Attendu : **ballottage favorable**
* Justification : pas élu, pas battu, et `s1` est le plus grand

### T11 — égalité en tête (avec candidat 2)

* Entrée : `30 30 25 15`
* Attendu : **ballottage favorable**
* Justification : égalité incluse (`s1 >= s2`)

### T12 — égalité totale

* Entrée : `25 25 25 25`
* Attendu : **ballottage favorable**
* Justification : `s1` est en tête (égalité incluse)

---

## E — Tester “ballottage défavorable” (qualifié mais pas en tête)

### T13 — pas en tête

* Entrée : `30 31 20 19`
* Attendu : **ballottage défavorable**
* Justification : pas élu, pas battu, mais `s1` < `s2`

### T14 — égalité derrière le premier

* Entrée : `30 35 30 5`
* Attendu : **ballottage défavorable**
* Justification : `s1` n’est pas en tête (`35` existe)

### T15 — juste au-dessus de 12,5, mais loin derrière

* Entrée : `12,51 40 30 17,49`
* Attendu : **ballottage défavorable**
* Justification : qualifié (pas < 12,5), personne > 50, mais pas en tête

---

## F — Tests “pièges” (chevauchements)

Ces tests montrent qu’une condition peut rendre les autres inutiles.

### T16 — s1 fort, mais un autre > 50 (donc battu)

* Entrée : `40 50,01 5 4,99`
* Attendu : **battu**
* Justification : un autre > 50

### T17 — deux raisons pour “battu”

* Entrée : `10 60 20 10`
* Attendu : **battu**
* Justification : `s1 < 12,5` et un autre > 50 (deux causes)

---

## Ce qu’il faut retenir

1. Les tests “au hasard” ne suffisent pas.
2. Les **bornes** obligent à tester :

   * `12,49` / `12,5` / `12,51`
   * `50` / `50,01`
3. Les **égalités** obligent à tester des cas spécifiques.
4. Un `OU` peut être correct, mais il masque parfois “pourquoi” on obtient un résultat.
5. Un jeu de tests sérieux prend du temps : c’est normal.

---


# Exercice 4.5 — Version qui passe tout le jeu de tests (T01 → T17)

Objectif : produire **exactement** l’une des 4 issues, en respectant les bornes :

* **élu** : `s1 > 50`
* **battu** : `s1 < 12,5` **OU** `un autre > 50`
* **ballottage favorable** : qualifié et **en tête** (égalité incluse)
* **ballottage défavorable** : qualifié mais **pas** en tête

Et avec **un seul `Ecrire` final**.

---

## Pseudo-code
```
1   Variables s1, s2, s3, s4 en Décimal
2   Variable resultat en Chaîne
3
4   Début
5       Lire s1
6       Lire s2
7       Lire s3
8       Lire s4
9
10      Si s1 > 50 Alors
11          resultat <- "élu"
12
13      SinonSi s1 < 12,5 OU s2 > 50 OU s3 > 50 OU s4 > 50 Alors
14          resultat <- "battu"
15
16      SinonSi s1 >= s2 ET s1 >= s3 ET s1 >= s4 Alors
17          resultat <- "ballottage favorable"
18
19      Sinon
20          resultat <- "ballottage défavorable"
21      FinSi
22
23      Ecrire resultat
24  Fin
```