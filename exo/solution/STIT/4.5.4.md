# Exercice 4.5 — Version 4 (un autre candidat peut aussi gagner)

## Introduction

On reprend la version précédente et on la confronte à un jeu de valeurs qu’on n’avait pas encore testé.

L’objectif reste le même : déterminer **uniquement** la situation du candidat n°1.

---

## Le cas oublié

### Exemple — s1 = 30, s2 = 55, s3 = 10, s4 = 5

Si on raisonne “version 3”, on ferait :

* `s1 > 50` : faux
* `s1 < 12,5` : faux
* `s1` n’est pas en tête
* donc : **ballottage défavorable**

Sauf que… `s2 = 55`.
Le candidat 2 est **élu au premier tour**. Donc :

* il n’y a **pas** de second tour
* le candidat 1 n’est **pas** en ballottage
* il est **battu** (il a perdu l’élection)

---

## Pourquoi la version 3 se trompe

La version 3 associe “battu” uniquement à : `s1 < 12,5`.

Mais on peut aussi être battu autrement :
on est battu si **l’élection est déjà terminée** parce qu’un autre candidat a gagné (`> 50`).

Avoir `12,5` ou plus ne suffit pas : encore faut-il qu’il y ait un second tour.

---

## Quand y a-t-il un second tour ?

Il y a un second tour **si et seulement si** :

* **aucun** candidat n’a strictement plus de `50`.

Donc :

* si **quelqu’un** a `> 50` → l’élection est finie (pas de second tour)
* le candidat 1 est soit l’élu (cas déjà traité), soit **battu**

---

## Pseudo-code

```
1   Variables s1, s2, s3, s4 en Décimal
2   Variable resultat en Chaîne
3
4   Début
5       Lire s1
6       Lire s2
7       Lire s3
8       Lire s4
9
10      Si s1 > 50 Alors
11          resultat <- "élu"
12      SinonSi s2 > 50 OU s3 > 50 OU s4 > 50 Alors
13          resultat <- "battu"
14      SinonSi s1 < 12,5 Alors
15          resultat <- "battu"
16      SinonSi s1 >= s2 ET s1 >= s3 ET s1 >= s4 Alors
17          resultat <- "ballottage favorable"
18      Sinon
19          resultat <- "ballottage défavorable"
20      FinSi
21
22      Ecrire resultat
23  Fin
```

---

## Remarque sur l’ordre des tests

L’ordre est une partie de la logique :

1. Est-ce que **le candidat 1** a gagné ? (`s1 > 50`)
2. Sinon : est-ce qu’**un autre** a gagné ? (`s2/s3/s4 > 50`) → élection finie → candidat 1 battu
3. Sinon : est-ce que le candidat 1 est éliminé ? (`s1 < 12,5`) → battu
4. Sinon : il y a bien un second tour → favorable si en tête, sinon défavorable

Les lignes “battu” donnent le même résultat final, mais pas pour la même raison :

* battu parce qu’un autre a gagné
* battu parce que `s1` n’atteint pas le seuil

On pourrait fusionner avec `OU`, mais les séparer rend l’enchaînement plus lisible.

---

## Inspection des valeurs

### Exemple 1 — s1 = 55, s2 = 20, s3 = 15, s4 = 10

* `s1 > 50` : vrai
  → **élu** ✓

### Exemple 2 — s1 = 30, s2 = 55, s3 = 10, s4 = 5

* `s1 > 50` : faux
* `s2 > 50` : vrai
  → **battu** ✓ (élection finie)

### Exemple 3 — s1 = 8, s2 = 40, s3 = 30, s4 = 22

* personne > 50
* `s1 < 12,5` : vrai
  → **battu** ✓ (éliminé)

### Exemple 4 — s1 = 35, s2 = 30, s3 = 20, s4 = 15

* personne > 50
* `s1 >= s2,s3,s4` : vrai
  → **ballottage favorable** ✓

### Exemple 5 — s1 = 20, s2 = 35, s3 = 25, s4 = 20

* personne > 50
* `s1` pas en tête
  → **ballottage défavorable** ✓

### Exemple 6 (égalité) — s1 = 25, s2 = 25, s3 = 25, s4 = 25

* personne > 50
* `s1 >= s2,s3,s4` : vrai
  → **ballottage favorable** ✓ (égalité incluse)

---

## Leçon

Même si on “analyse le candidat 1”, sa situation dépend du contexte :
les scores des autres peuvent **supprimer le second tour**.

C’est un piège fréquent : on se concentre sur `s1` (le sujet) et on oublie l’état global de l’élection.

---

## Conclusion

La version 4 corrige ce piège : elle vérifie d’abord si l’élection est déjà finie à cause d’un autre candidat.

Elle couvre bien les 4 issues :

* **élu** : `s1 > 50`
* **battu** : un autre `> 50`, ou `s1 < 12,5`
* **ballottage favorable** : personne `> 50`, `s1 >= 12,5`, et `s1` en tête (égalité incluse)
* **ballottage défavorable** : personne `> 50`, `s1 >= 12,5`, mais `s1` pas en tête
